<lib name='jquery'/>
<lib name='syntaxhighlighter:php'/>
    
	
	<foreach for="$arrCallTrace" item='arrCall' key='callIdx'>
	<div style="margin-left:30px;">
	
		<div>
			#{=$callIdx}
	
			<if "!empty($arrCall['file'])">
			[<a href="javascript:jquery('#source-{=$sCallTraceId}-{=$callIdx}').toggle()">source</a>]
			</if>
			
			{=str_replace('\\','\\',@$arrCall['class'])}{=@$arrCall['type']}{=$arrCall['function']}
			(
				<foreach for="@$arrCall['args']" item='argv' idx='idx'>
				
				<if $idx>,</if>
				
				<if "is_object($argv)">
					<a>object</a>
				<else /> 
					<a>{= \org\jecat\framework\lang\Type::reflectType($argv)}</a>
				</if>
				</foreach>
			)
		</div>
		 
		<if "!empty($arrCall['file'])">
		<div style="display:none;margin-left:30px;color:#999999" id='source-{=$sCallTraceId}-{=$callIdx}'>
				{=@$arrCall['file']} (line {=@$arrCall['line']})
				<pre class="brush: php; first-line: {=$arrCall['segmentOffset']}; highlight: [{=$arrCall['line']}]">
	// ... ...
	<foreach for="\org\opencomb\friendlyerror\ErrorReporter::readSourceSegment(@$arrCall['file'],@$arrCall['segmentOffset'],@$arrCall['segmentLength'])" item='sLine'>{=$sLine}</foreach>
	// ... ...
				</pre>
			</div>
			</if>			
		</div>
		</foreach>